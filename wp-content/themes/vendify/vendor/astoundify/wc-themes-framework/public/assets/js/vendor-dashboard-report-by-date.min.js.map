{"version":3,"sources":["public/assets/js/vendor-dashboard-report-by-date.js"],"names":["window","undefined","wp","document","$","jQuery","api","Models","Collections","Views","Chart","astoundifyWcThemesVendorsDashboard","apiModel","extend","routeName","methods","defaults","Backbone","View","initialize","that","this","$el","block","message","overlayCSS","background","opacity","css","width","model","fetch","success","unblock","listenTo","render","events","submit #dashboard-reports-form","change #reports-start-date-input","change #reports-end-date-input","changeDate","e","preventDefault","startDate","val","endDate","data","range","start_date","end_date","submitForm","theForm","target","find","self","changed","changedAttributes","_","each","value","key","type","options","maintainAspectRatio","legend","display","tooltips","displayColors","mode","cornerRadius","callbacks","title","tooltipItems","tooltips_titles","index","label","datasets","datasetIndex","tooltips_contents","scales","yAxes","gridLines","ticks","beginAtZero","xAxes","zeroLineWidth","el","length","isNaN","parseFloat","toFixed","replace","html","addClass","setTimeout","removeClass","dateField","field","datepicker","defaultDate","dateFormat","numberOfMonths","showButtonPanel"],"mappings":"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","file":"vendor-dashboard-report-by-date.min.js","sourcesContent":["/**\n * Vendor Report By Date (REST API).\n *\n * @since 1.0.0\n */\n(function( window, undefined ){\n\n\twindow.wp = window.wp || {};\n\tvar document = window.document;\n\tvar $ = window.jQuery;\n\n\t/**\n\t * Scope for current file.\n\t */\n\tvar api = {\n\t\tModels: {},\n\t\tCollections: {},\n\t\tViews: {}\n\t};\n\n\t/**\n\t * Backbone Model.\n\t * Using WPApiBaseModel to handle the cookie, etc.\n\t *\n\t * @since 1.0.0\n\t *\n\t * @extends WPApiBaseModel\n\t */\n\tapi.Models.Chart = astoundifyWcThemesVendorsDashboard.apiModel.extend({\n\t\trouteName: 'vendor/dashboard-report-by-date',\n\t\tmethods: [ 'GET' ],\n\t\tdefaults: {\n\t\t},\n\t});\n\n\t/**\n\t * Views: Render the output.\n\t *\n\t * @since 1.0.0\n\t */\n\tapi.Views.Chart = wp.Backbone.View.extend( {\n\t\tinitialize: function() {\n\t\t\tvar that = this;\n\n\t\t\tthis.$el.block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t},\n\t\t\t\tcss: {\n\t\t\t\t\twidth: '100%'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.model.fetch({\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tthat.$el.unblock();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.listenTo( this.model, 'change', this.render );\n\t\t},\n\n\t\tevents: {\n\t\t\t'submit #dashboard-reports-form': 'submitForm',\n\t\t\t'change #reports-start-date-input': 'changeDate',\n\t\t\t'change #reports-end-date-input': 'changeDate',\n\t\t},\n\n\t\tchangeDate: function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar that = this;\n\t\t\tvar startDate = $( '#reports-start-date-input' ).val();\n\t\t\tvar endDate = $( '#reports-end-date-input' ).val();\n\n\t\t\tif ( '' === startDate || '' === endDate ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.$el.block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t},\n\t\t\t\tcss: {\n\t\t\t\t\twidth: '100%'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.model.fetch( {\n\t\t\t\tdata: {\n\t\t\t\t\trange: 'custom',\n\t\t\t\t\tstart_date: startDate,\n\t\t\t\t\tend_date: endDate,\n\t\t\t\t},\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tthat.$el.unblock();\n\t\t\t\t},\n\t\t\t} );\n\t\t},\n\n\t\tsubmitForm: function( e ) {\n\t\t\te.preventDefault();\n\t\t\tvar that = this;\n\t\t\tvar theForm = $(e.target);\n\n\t\t\tthis.$el.block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.model.fetch( {\n\t\t\t\tdata: {\n\t\t\t\t\trange: 'custom',\n\t\t\t\t\tstart_date: theForm.find( 'input[name=\"start_date\"]' ).val(),\n\t\t\t\t\tend_date: theForm.find( 'input[name=\"end_date\"]' ).val(),\n\t\t\t\t},\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tthat.$el.unblock();\n\t\t\t\t},\n\t\t\t} );\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar self = this;\n\t\t\tvar changed = this.model.changedAttributes();\n\n\t\t\t_.each( changed, function( value, key ) {\n\n\t\t\t\tif ( 'chart_commission' === key ) {\n\n\t\t\t\t\tvar reportChart = new Chart( self.$el.find( '.chart-commission-placeholder.main' ), {\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\tdata: value,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\t\tlegend: { // Do not display legend.\n\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttooltips: { // Tooltips setup.\n\t\t\t\t\t\t\t\tdisplayColors: false,\n\t\t\t\t\t\t\t\tmode: 'single',\n\t\t\t\t\t\t\t\tcornerRadius: 0,\n\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\ttitle: function( tooltipItems, data ) {\n\t\t\t\t\t\t\t\t\t\treturn data.tooltips_titles[ tooltipItems[0].index ];\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tlabel: function( tooltipItems, data ) {\n\t\t\t\t\t\t\t\t\t\treturn data.datasets[tooltipItems.datasetIndex].tooltips_contents[tooltipItems.index];\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\t\tyAxes: [{\n\t\t\t\t\t\t\t\t\tgridLines: {\n\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tbeginAtZero:true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\txAxes: [{\n\t\t\t\t\t\t\t\t\tgridLines: {\n\t\t\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tzeroLineWidth: 0,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\tvar el = self.$el.find( '.' + key );\n\n\t\t\t\t\tif ( 0 === el.length ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// if this is a number, keep the decimals number at 2.\n\t\t\t\t\tif ( ! isNaN( value ) && parseFloat(value).toFixed ) {\n\t\t\t\t\t\tvalue = parseFloat(value).toFixed(2).replace(\".00\", \"\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tel.html( value ).addClass( 'astoundify-wc-themes-stat-updated' );\n\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\tel.removeClass( 'astoundify-wc-themes-stat-updated' );\n\t\t\t\t\t}, 1000 );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\t\t},\n\t} );\n\n\t/**\n\t * Bind items to to the DOM.\n\t *\n\t * @since 1.0.0\n\t */\n\t$(function() {\n\n\t\t// Date Fields.\n\t\tvar dateField = function( field ) {\n\t\t\tfield.datepicker({\n\t\t\t\tdefaultDate: '',\n\t\t\t\tdateFormat: 'yy-mm-dd',\n\t\t\t\tnumberOfMonths: 1,\n\t\t\t\tshowButtonPanel: false,\n\t\t\t});\n\t\t};\n\t\tdateField( $( '#reports-start-date-input' ) );\n\t\tdateField( $( '#reports-end-date-input' ) );\n\n\t\tnew api.Views.Chart({\n\t\t\tel: '#astoundify-wc-themes-dashboard-report-by-date',\n\t\t\tmodel: new api.Models.Chart,\n\t\t}).render();\n\n\t});\n\n})( window );\n"]}