{"version":3,"sources":["public/assets/js/events-filters.js"],"names":["window","undefined","wp","document","$","jQuery","$document","astoundifyWcThemesEventFilters","DateField","field","datepicker","defaultDate","dateFormat","settings","numberOfMonths","showButtonPanel","RadiusFieldSlider","radius","$field","siblings","$text","hide","html","val","unit","slider","range","animate","min","max","value","step","slide","event","ui","trigger","change","this","LocationField","google","maps","$lat","$lng","geocoder","Geocoder","updateFields","pos","lat","lng","geoLocateIt","geocode","address","results","geometry","location","addressAutoComplete","places","Autocomplete","autoCompleteArgs","addListener","place","getPlace","addDomListener","e","keyCode","preventDefault","ajaxSearch","$form","$loop","$page","find","isEventsSearch","urlParams","URLSearchParams","search","has","get","addClass","on","orderby","length","append","submit","to","text","isNaN","hasClass","Number","block","message","overlayCSS","background","opacity","querystring","serialize","ajax","send","data","action","formData","success","response","unblock","history","pushState","error","ready"],"mappings":"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","file":"events-filters.min.js","sourcesContent":["/**\n * Event Filters\n *\n * @since 1.0.0\n */\n( function( window, undefined ) {\n\n\twindow.wp = window.wp || {};\n\n\tvar document = window.document;\n\tvar $ = window.jQuery;\n\tvar wp = window.wp;\n\tvar $document = $(document);\n\n\t/**\n\t * Date Field\n\t *\n\t * @since 1.0.0\n\t */\n\tastoundifyWcThemesEventFilters.DateField = function( field ) {\n\t\tfield.datepicker({\n\t\t\tdefaultDate: '',\n\t\t\tdateFormat: astoundifyWcThemesEventFilters.settings.dateFormat,\n\t\t\tnumberOfMonths: 1,\n\t\t\tshowButtonPanel: false,\n\t\t});\n\t};\n\n\t/**\n\t * Radius Field Slider\n\t *\n\t * @since 1.0.0\n\t */\n\tastoundifyWcThemesEventFilters.RadiusFieldSlider = function( field ) {\n\t\tvar settings = astoundifyWcThemesEventFilters.settings.radius;\n\t\tvar $field = field.siblings( '.location-radius-field' );\n\t\tvar $text = $( '.location-radius-field-value' );\n\n\t\t$field.hide();\n\t\t$text.html( $field.val() + ' ' + settings.unit );\n\n\t\tfield.slider({\n\t\t\trange: \"max\",\n\t\t\tanimate: true,\n\t\t\tmin: settings.min,\n\t\t\tmax: settings.max,\n\t\t\tvalue: $field.val(),\n\t\t\tstep: settings.step,\n\t\t\tslide: function( event, ui ) {\n\t\t\t\t$field.val( ui.value ).trigger( 'change' );\n\t\t\t},\n\t\t});\n\n\t\t$field.change( function() {\n\t\t\t$text.html( $( this ).val() + ' ' + settings.unit );\n\t\t});\n\t};\n\n\t/**\n\t * Location Field\n\t *\n\t * @since 1.0.0\n\t */\n\tastoundifyWcThemesEventFilters.LocationField = function( field ) {\n\t\t// Check if google maps loaded.\n\t\tif ( typeof google !== 'object' || typeof google.maps !== 'object') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fields.\n\t\tvar $lat = $( '#event-location-lat-field' );\n\t\tvar $lng = $( '#event-location-lng-field' );\n\n\t\t// Helper.\n\t\tvar settings = astoundifyWcThemesEventFilters.settings;\n\t\tvar geocoder = new google.maps.Geocoder();\n\n\t\tvar updateFields = function( pos ) {\n\t\t\tif ( undefined === pos || '' === pos ) {\n\t\t\t\t$lat.val( '' );\n\t\t\t\t$lng.val( '' );\n\t\t\t} else {\n\t\t\t\t$lat.val( pos.lat() );\n\t\t\t\t$lng.val( pos.lng() );\n\t\t\t}\n\t\t};\n\n\t\tvar geoLocateIt = function() {\n\t\t\tif ( '' === field.val() ) {\n\t\t\t\tupdateFields( '' );\n\t\t\t} else {\n\t\t\t\tgeocoder.geocode( {\n\t\t\t\t\t'address': field.val(),\n\t\t\t\t}, function( results ) {\n\t\t\t\t\tupdateFields( results[0].geometry.location );\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\n\t\t// Enable autocomplete in location field.\n\t\tvar addressAutoComplete = new google.maps.places.Autocomplete( field[0], settings.autoCompleteArgs );\n\n\t\t// On Clicking Location Drop Down.\n\t\tgoogle.maps.event.addListener( addressAutoComplete, 'place_changed', function() {\n\t\t\tvar place = addressAutoComplete.getPlace();\n\n\t\t\tif( undefined === place ) {\n\t\t\t\tupdateFields( '' );\n\t\t\t} else {\n\t\t\t\tupdateFields( place.geometry.location );\n\t\t\t}\n\t\t});\n\n\t\t// On Enter/After Select Drop Down.\n\t\tgoogle.maps.event.addDomListener( field[0], 'keydown', function(e) { \n\t\t\tif ( e.keyCode == 13 ) {\n\t\t\t\te.preventDefault(); \n\n\t\t\t\t$( \".pac-container\" ).hide(); // Hide autocomplete option.\n\t\t\t\tgeoLocateIt();\n\t\t\t}\n\t\t});\n\n\t\t// On Change.\n\t\tgoogle.maps.event.addDomListener( field[0], 'change', function(e) { \n\t\t\tgeoLocateIt();\n\t\t});\n\t};\n\n\t/**\n\t * AJAX Filters\n\t *\n\t * @since 1.0.0\n\t */\n\tastoundifyWcThemesEventFilters.ajaxSearch = function() {\n\t\tvar $form = $( '#astoundify-wc-themes-events-filters-form' );\n\t\tvar $loop = $( '#astoundify-wc-themes-loop' );\n\t\tvar $page = $form.find( '#page' );\n\n\t\t// Check if it's an event search.\n\t\t// @link https://davidwalsh.name/query-string-javascript\n\t\tvar isEventsSearch = false;\n\t\tvar urlParams = new URLSearchParams( window.location.search );\n\t\tif ( urlParams.has( 's' ) && urlParams.has( 'post_type' ) && urlParams.has( 'location' ) && 'product' === urlParams.get( 'post_type' ) ) {\n\t\t\tisEventsSearch = true;\n\t\t}\n\n\t\t// Add classes.\n\t\tif ( isEventsSearch ) {\n\t\t\t$( '.woocommerce-pagination' ).addClass( 'ajax-events-pagination' );\n\t\t\t$( '.woocommerce-ordering' ).addClass( 'ajax-events-ordering' );\n\t\t}\n\n\t\t// AJAX Ordering.\n\t\t$( '.woocommerce-ordering' ).on( 'submit', function() {\n\t\t\te.preventDefault(); // Disable WC ordering submit script.\n\t\t});\n\t\t$(document).on( 'change', '.woocommerce-ordering', function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar orderby = $( this ).find( 'select[name=\"orderby\"]' ).val();\n\t\t\tif ( ! $( '#events-orderby-field' ).length ) {\n\t\t\t\t$form.append( '<input id=\"events-orderby-field\" type=\"hidden\" name=\"orderby\" value=\"' + orderby + '\">' );\n\t\t\t} else {\n\t\t\t\t$( '#events-orderby-field' ).val( orderby );\n\t\t\t}\n\t\t\t$form.submit();\n\t\t} );\n\n\t\t// On AJAX Pagination.\n\t\t$(document).on( 'click', '.woocommerce-pagination a', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar to = $(this).text();\n\n\t\t\tif ( isNaN( to ) ) {\n\t\t\t\tvar forward = $(this).hasClass( 'next' );\n\n\t\t\t\tif ( forward ) {\n\t\t\t\t\tto = Number( $page.val() ) + Number(1);\n\t\t\t\t} else {\n\t\t\t\t\tto = Number( $page.val() ) - Number(1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$page.val( to );\n\t\t\t$form.submit();\n\t\t} );\n\n\t\t// On Event Search Form Submit.\n\t\t$form.on( 'submit', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\t$loop.block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar querystring = $form.serialize();\n\n\t\t\twp.ajax.send( {\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'astoundify_wc_themes_events_product_results',\n\t\t\t\t\tformData: querystring,\n\t\t\t\t},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t$loop.html( response );\n\t\t\t\t\t$( '.woocommerce-pagination' ).addClass( 'ajax-events-pagination' );\n\t\t\t\t\t$( '.woocommerce-ordering' ).addClass( 'ajax-events-ordering' );\n\t\t\t\t\tif ( $( '#events-orderby-field' ).val() ) {\n\t\t\t\t\t\t$( '.woocommerce-ordering select[name=\"orderby\"]' ).val( $( '#events-orderby-field' ).val() );\n\t\t\t\t\t}\n\t\t\t\t\t$loop.unblock();\n\n\t\t\t\t\twindow.history.pushState( '', '', '?' + querystring );\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\t$loop.unblock();\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\t};\n\n\t/**\n\t * Wait for DOM ready.\n\t *\n\t * @since 1.0.0\n\t */\n\t$document.ready( function() {\n\t\t// Filters Date Field.\n\t\tastoundifyWcThemesEventFilters.DateField( $( '#event-schedule-start-field' ) );\n\t\tastoundifyWcThemesEventFilters.DateField( $( '#event-schedule-end-field' ) );\n\n\t\t// Filters Location Field.\n\t\tastoundifyWcThemesEventFilters.LocationField( $( '#event-location-field' ) );\n\t\tastoundifyWcThemesEventFilters.RadiusFieldSlider( $( '#event-location-radius-field-slider' ) );\n\n\t\t// Monitor search.\n\t\tastoundifyWcThemesEventFilters.ajaxSearch();\n\t} );\n\n}( window ) );"]}