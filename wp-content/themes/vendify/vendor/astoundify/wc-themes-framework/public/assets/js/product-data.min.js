!function(e,t){e.wp=e.wp||{};var s=e.wp,i=e.jQuery,a=astoundifyWcThemesEventsProductData;a.Functions={},a.Functions.UploadImageField=function(t,e){var n={title:"Upload",button:"Insert"};_.extend(n,e);var a=s.media({className:"media-frame astoundify-wc-themes-media-frame",frame:"select",title:n.title,button:{text:n.button},multiple:!1}),i=t.find("img"),o=t.find('input[type="hidden"]');t.hasClass("remove")?(i.attr("src",""),o.val(""),t.removeClass("remove").trigger("change")):a.on("select",function(){var e=a.state().get("selection").first().toJSON();i.attr("src",e.sizes.thumbnail.url),o.val(e.id),t.addClass("remove").trigger("change")}).open()},a.Functions.DateField=function(e){e.datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0})},a.Views={},a.Views.Toolbar=Backbone.View.extend({tagName:"div",className:"toolbar",initialize:function(e){_.extend(this,e)},events:{"click #add-item":"addItem","keyup #filter":"filter"},render:function(){this.$el.html(this.template())},addItem:function(e){e.preventDefault();var t=this.collection.add({});i('[data-cid="'+t.cid+'"]').removeClass("closed").addClass("open")},filter:function(e){var t,n=i(e.target).val(),a=new RegExp(n,"gi");t=this.collection.filter(function(e){return!a.test(e.get("name"))}),this.collection.trigger("filter",t)}}),a.Views.SortableList=s.Backbone.View.extend({className:"wc-metaboxes",initialize:function(e){this._viewsByCid={},_.extend(this,e),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"remove",this.removeOne),this.listenTo(this.collection,"filter",this.filter)},render:function(){return this.$el.sortable({cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")}}),this},addOne:function(e){var t=new(this.itemViews[e.get("type")])({model:e,collection:this.collection});return this.views.add(t),i(".wc-customer-search").trigger("wc-enhanced-select-init"),a.Functions.DateField(i(".date_field_input")),this._viewsByCid[e.cid]=t},removeOne:function(e){var t=this._viewsByCid[e.cid];t&&(t.remove(),delete this._viewsByCid[e.cid])},filter:function(e){var t=this;_.isEmpty(e)?_.each(this.views.get(),function(e){e.$el.show()}):_.each(e,function(e){t._viewsByCid[e.cid].$el.hide()})}}),a.Views.ExpandableItem=s.Backbone.View.extend({initialize:function(e){_.extend(this,e)},attributes:function(){return{"data-cid":this.model.cid}},events:{"keyup .item-name":"changeName","click .delete":"removeOne","click .upload_image_button":"uploadImage"},changeName:function(e){var t=i(e.currentTarget).data("cid");this.collection.get(t).set("name",i(e.currentTarget).val())},uploadImage:function(e){e.preventDefault();var t=i(e.currentTarget),n=t.data("cid");a.Functions.UploadImageField(t,{title:this.i18n.uploadTitle,button:this.i18n.insertImageButtonText}),this.collection.get(n).set("image",t.find('input[type="hidden"]').val())},render:function(){this.views.add(new astoundifyWcThemesEventsProductData.Views.ExpandableItemHeader({model:this.model,template:this.headerTemplate})),this.views.add(new astoundifyWcThemesEventsProductData.Views.ExpandableItemContent({model:this.model,template:this.contentTemplate}))},removeOne:function(e){e.preventDefault();var t=i(e.currentTarget).data("cid");this.collection.remove(t).destroy()}}),a.Views.ExpandableItemHeader=Backbone.View.extend({tagName:"h3",initialize:function(e){_.extend(this,e),this.listenTo(this.model,"change",this.render)},render:function(){var e=_.extend({},this.model.toJSON(),{cid:this.model.cid});this.$el.html(this.template(e))}}),a.Views.ExpandableItemContent=Backbone.View.extend({className:"wc-metabox-content woocommerce_variable_attributes",initialize:function(e){_.extend(this,e)},render:function(){var e=_.extend({},this.model.toJSON(),{cid:this.model.cid});this.$el.html(this.template(e))}}),i(document.body).on("wc-init-tabbed-panels",function(){i(".pricing").addClass("show_if_event"),i(".inventory_options, ._manage_stock_field, .stock_fields, ._stock_status_field, ._sold_individually_field").addClass("show_if_event"),i("._sold_individually_field").parent("div").addClass("show_if_event"),i(".shipping_options").addClass("hide_if_event"),i(".attribute_options").addClass("hide_if_event"),i(".location_options").addClass("show_if_event");var e=i("#events-external-fields"),t=i(".product_data_tabs .inventory_options"),n=function(){"event"===i("#product-type").val()?i("#_external_event").is(":checked")?(i("#_ticket").prop("checked",!1).trigger("change").prop("disabled",!0),e.show().addClass("show_if_event"),t.hide().removeClass("show_if_event")):(i("#_ticket").prop("disabled",!1).trigger("change"),e.hide().removeClass("show_if_event"),t.show().addClass("show_if_event")):(e.hide().removeClass("show_if_event"),t.addClass("show_if_event"))};n(),i("#_external_event").change(function(){n()}),i("#product-type").change()})}(window),function(e,t){e.wp=e.wp||{};var n=e.wp,a=e.jQuery,i=_.extend({},{Models:{},Collections:{},Views:{}},astoundifyWcThemesEventsProductData.attendees);i.Models.Attendee=Backbone.Model.extend({defaults:{type:"external",name:"",email:"",location:""}}),i.Collections.Attendees=Backbone.Collection.extend({model:i.Models.Attendee}),i.Views.AttendeeUser=astoundifyWcThemesEventsProductData.Views.ExpandableItem.extend({events:{"change .wc-customer-search":"changeUserID","click .delete":"removeOne"},changeUserID:function(e){var t=a(e.currentTarget).data("cid"),n={user_id:this.$el.find(".wc-customer-search").val(),name:this.$el.find(".wc-customer-search option:selected").text()};this.collection.get(t).set(n)}}),i.Views.Toolbar=astoundifyWcThemesEventsProductData.Views.Toolbar.extend({addItem:function(e){e.preventDefault();var t=this.collection.add({type:a("#attendee-type").val()});a('[data-cid="'+t.cid+'"]').removeClass("closed").addClass("open")}});var o=new i.Collections.Attendees,s=new n.Backbone.View({el:a("#wc_themes_attendees_options_inner"),collection:o});s.views.add(new i.Views.Toolbar({collection:o,template:n.template("attendeeAddToolbar")})),s.views.add(new astoundifyWcThemesEventsProductData.Views.SortableList({id:"astoundify-wc-themes-attendee-items",collection:o,itemViews:{external:astoundifyWcThemesEventsProductData.Views.ExpandableItem.extend({className:"wc-metabox attendee closed",contentTemplate:n.template("attendeeExternal"),headerTemplate:n.template("attendeeHeader")}),user:i.Views.AttendeeUser.extend({className:"wc-metabox attendee closed",contentTemplate:n.template("attendeeUser"),headerTemplate:n.template("attendeeHeader")})}})),s.collection.add(i.data),s.render()}(window),function(e,t){e.wp=e.wp||{};var n=e.wp,a=e.jQuery,i=_.extend({},{Models:{},Collections:{},Views:{}},astoundifyWcThemesEventsProductData.lineup);i.Models.Person=Backbone.Model.extend({defaults:{type:"external",name:"",email:"",image:"",title:"",url:""}}),i.Collections.Lineup=Backbone.Collection.extend({model:i.Models.Person});var o=new i.Collections.Lineup,s=new n.Backbone.View({el:a("#wc_themes_lineup_options_inner"),collection:o});s.views.add(new astoundifyWcThemesEventsProductData.Views.Toolbar({collection:o,template:n.template("lineupAddToolbar")})),s.views.add(new astoundifyWcThemesEventsProductData.Views.SortableList({id:"astoundify-wc-themes-lineup-items",collection:o,itemViews:{external:astoundifyWcThemesEventsProductData.Views.ExpandableItem.extend({className:"wc-metabox lineup-person closed",i18n:i.i18n,contentTemplate:n.template("personExternal"),headerTemplate:n.template("personHeader")})}})),s.collection.add(i.data),s.render()}(window),function(e,t){e.wp=e.wp||{};var n=e.wp,a=e.jQuery,i=_.extend({},{Models:{},Collections:{},Views:{}},astoundifyWcThemesEventsProductData.sponsors);i.Models.Sponsor=Backbone.Model.extend({defaults:{type:"external",name:"",email:"",image:"",url:""}}),i.Collections.Sponsors=Backbone.Collection.extend({model:i.Models.Sponsor});var o=new i.Collections.Sponsors,s=new n.Backbone.View({el:a("#wc_themes_sponsors_options_inner"),collection:o});s.views.add(new astoundifyWcThemesEventsProductData.Views.Toolbar({collection:o,template:n.template("sponsorAddToolbar")})),s.views.add(new astoundifyWcThemesEventsProductData.Views.SortableList({id:"astoundify-wc-themes-sponsor-items",collection:o,itemViews:{external:astoundifyWcThemesEventsProductData.Views.ExpandableItem.extend({className:"wc-metabox sponsor closed",i18n:i.i18n,headerTemplate:n.template("sponsorHeader"),contentTemplate:n.template("sponsorExternal")})}})),s.collection.add(i.data),s.render()}(window),function(e,t){e.wp=e.wp||{};var n=e.wp,a=e.jQuery,i=_.extend({},{Models:{},Collections:{},Views:{}},astoundifyWcThemesEventsProductData.schedule);i.Models.Day=Backbone.Model.extend({defaults:{type:"day",day:null,start:null,end:null}}),i.Views.Day=astoundifyWcThemesEventsProductData.Views.ExpandableItem.extend({events:{"change .schedule-date":"changeDate","click .delete":"removeOne","click .upload_image_button":"uploadImage"},changeDate:function(e){var t=a(e.currentTarget).data("cid");this.collection.get(t).set("date",a(e.currentTarget).val())}}),i.Collections.Days=Backbone.Collection.extend({model:i.Models.Day});var o=new i.Collections.Days,s=new n.Backbone.View({el:a("#wc_themes_schedule_options_inner"),collection:o});s.views.add(new astoundifyWcThemesEventsProductData.Views.Toolbar({collection:o,template:n.template("scheduleAddToolbar")})),s.views.add(new astoundifyWcThemesEventsProductData.Views.SortableList({id:"astoundify-wc-themes-schedule-items",collection:o,itemViews:{day:i.Views.Day.extend({className:"wc-metabox day closed",contentTemplate:n.template("dayTime"),headerTemplate:n.template("dayTimeHeader")})}})),s.collection.add(i.data),s.render()}(window),function(e,t){e.wp=e.wp||{};var n=e.wp,a=e.jQuery,i=_.extend({},{Models:{},Collections:{},Views:{}},astoundifyWcThemesEventsProductData.location);i.Models.Location=Backbone.Model.extend({defaults:{address:!1,address_1:!1,address_2:!1,city:!1,postcode:!1,country:!1,state:!1,latitude:!1,longitude:!1}}),i.Views.Fields=Backbone.View.extend({initialize:function(e){_.extend(this,e);var t=this;this.autocomplete=new google.maps.places.Autocomplete(document.getElementById("address")),a("#address").on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),this.autocomplete.addListener("place_changed",function(){t.placeChanged()}),this.listenTo(this.model,"change",function(){t.updateFields()})},placeChanged:function(){for(var e,t,n,a,i,o=this.autocomplete.getPlace(),s="",d=0;d<o.address_components.length;d++){switch(o.address_components[d].types[0]){case"route":e=o.address_components[d].long_name;break;case"street_number":t=o.address_components[d].long_name;break;case"postal_town":case"locality":case"sublocality_level_1":n=o.address_components[d].long_name;break;case"postal_code":a=o.address_components[d].long_name;break;case"country":i=o.address_components[d].short_name;break;case"administrative_area_level_1":s=o.address_components[d].long_name}}this.model.clear(),this.model.set({address_1:""!==e&&t?t+" "+e:e,address_2:"",city:""!==n?n:o.vicinity?o.vicinity:n,postcode:a,country:i,state:s,latitude:o.geometry.location.lat(),longitude:o.geometry.location.lng()}),this.map.addMarker(new google.maps.LatLng(this.model.get("latitude"),this.model.get("longitude")))},updateFields:function(){_.each(this.model.changed,function(e,t){e&&a("#"+t).val(e)})}}),i.Views.Map=Backbone.View.extend({map:!1,marker:!1,located:!1,center:new google.maps.LatLng(-34.397,150.644),render:function(){this.map=new google.maps.Map(document.getElementById("astoundify-wc-themes-product-location-map"),{zoom:12}),this.model.set(i.data),this.model.get("latitude")&&this.model.get("longitude")&&(this.center=new google.maps.LatLng(this.model.get("latitude"),this.model.get("longitude")),this.map.setCenter(this.center),this.addMarker(this.center))},rerender:function(){google.maps.event.trigger(this.map,"resize"),this.map.setCenter(this.center)},addMarker:function(e){this.marker||(this.marker=new google.maps.Marker({map:this.map})),this.center=e,this.marker.setPosition(e),this.map.setCenter(e)}}),i.Views.Panel=n.Backbone.View.extend({initialize:function(e){_.extend(this,e)},render:function(){this.map=new i.Views.Map({model:this.model}),this.fields=new i.Views.Fields({model:this.model,map:this.map}),this.fields.render(),this.map.render()}}),a(document.body).on("wc-init-tabbed-panels",function(){var e=new i.Views.Panel({el:"#location_product_data",model:new i.Models.Location});e.render(),a(".location_options").on("click",function(){e.map.rerender()})})}(window);
//# sourceMappingURL=product-data.min.js.map
